<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>弹性运动</title>
    <style media="screen">
      #div1 {width:100px;height:100px;background:red;position: absolute;}
    </style>
    <script type="text/javascript">
    window.onload = function() {
      var btn = document.getElementById('btn');
      btn.onclick = function() {
        startMove();
      }
    };
        var iSpeedX = 20;
        var iSpeedY = 8;
        function startMove() {
          setInterval(function() {
            var oDiv = document.getElementById('div1');
            iSpeedY +=3;

            var l = oDiv.offsetLeft + iSpeedX;
            var t = oDiv.offsetTop + iSpeedY;

            if(t >= document.documentElement.clientHeight - oDiv.offsetHeight) {
              iSpeedY *=-0.8;
              iSpeedX *= 0.8;
              t = document.documentElement.clientHeight - oDiv.offsetHeight;
            }else if (t <= 0) {
              iSpeedY *=-0.8;
              iSpeedX *=0.8;
              t=0;
            }

            if(l >= document.documentElement.clientWidth - oDiv.offsetWidth) {
              iSpeedX *= -0.8;
              l = document.documentElement.clientWidth - oDiv.offsetWidth;
            } else if (l <= 0) {
              iSpeedX *= -0.8;
              l =0;
            }

            if(Math.abs(iSpeedX) < 1 ) {//因为会直接删除小数部分
              iSpeedX = 0;
            }

            if(Math.abs(iSpeedY) < 1) {
              iSpeedY = 0;
            }

            oDiv.style.left = l + 'px';
            oDiv.style.top = t + 'px';
          },30);
      }
    </script>
  </head>
  <body>
    <input type="button" name="name" value="start moving" id="btn">
    <div id="div1"></div>
  </body>
</html>
